---
title: Shelf Settings
layout: shelf
permalink: /shelf/settings/
---

<form onsubmit="store_keys()" id="keys">
  <label for="gbApiKey">
    Giant Bomb API key
  </label>
  <input type="text" id="gbApiKey" name="gbApiKey" required size="50">
  <label for="airtableToken">
    Airtable Personal Access Token
  </label>
  <input type="text" id="airtableToken" name="airtableToken" required size="50">
  <label for="airtableBase">
    Airtable base
  </label>
  <input type="text" id="airtableBase" name="airtableBase" required size="50">
  <button type="submit" name="submit" value="Submit">Submit</button>
</form>

<script>
  function ready(fn) {
    if (document.readyState !== 'loading') {
      fn();
      return;
    }
    document.addEventListener('DOMContentLoaded', fn);
  }
  
  inputs = document.querySelectorAll('input[type="text"]');
  keysForm = document.forms['keys'];
  storedKeys = Object.keys(localStorage);
    
  ready(function() {
    if (localStorage.gbApiKey) {
      keysForm.elements["gbApiKey"].value = localStorage.gbApiKey;
      keysForm.elements["gbApiKey"].disabled = true;
    }
    if (localStorage.airtableToken) {
      keysForm.elements["airtableToken"].value = localStorage.airtableToken;
      keysForm.elements["airtableToken"].disabled = true;
    }
    if (localStorage.airtableBase) {
      keysForm.elements["airtableBase"].value = localStorage.airtableBase;
      keysForm.elements["airtableBase"].disabled = true;
    }
    if (localStorage.gbApiKey, localStorage.airtableToken, localStorage.airtableBase) {
      keysForm.elements["submit"].disabled = true;
    }
  });

  function store_keys(){    
    inputs.forEach((element) => {
      const inputId = element.getAttribute("id");
      const inputValue = element.value;
      localStorage.setItem(inputId, inputValue);
    });
  };
</script>